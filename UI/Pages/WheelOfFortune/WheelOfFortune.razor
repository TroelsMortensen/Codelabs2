@page "/wheeloffortune"

<PageTitle>Wheel of Fortune</PageTitle>

<div class="wheel-container">
    <div class="weight-distribution-container">
        <div class="weight-distribution-bar">
            @foreach (var segment in WeightDistributionSegments)
            {
                <div class="weight-segment" 
                     style="width: @($"{segment.WidthPercentage:F2}%"); background-color: @segment.Color;"
                     title="Sector @segment.Label: @($"{segment.Weight:F3}")">
                    <span class="weight-segment-label">@segment.Label</span>
                </div>
            }
        </div>
    </div>
    <div class="wheel-wrapper">
        <div id="wheelOfFortune" class="wheel-of-fortune">
            <canvas id="wheel" 
                    @ref="canvasElement"
                    class="wheel-canvas"
                    style="transform: rotate(@($"{CurrentAngle * 180 / Math.PI:F2}deg"));"></canvas>
            <div id="spin" 
                 class="spin-button" 
                 style="background-color: @SpinButtonColor;"
                 @onclick="Spin"
                 @onclick:preventDefault>
                @(IsSpinning ? CurrentSectorLabel : SpinButtonText)
            </div>
        </div>
    </div>
    <div class="controls-container">
        <div class="control-group">
            <label for="numOfSlices">Number of Slices:</label>
            <input type="number" 
                   id="numOfSlices" 
                   min="1" 
                   max="12" 
                   value="@NumberOfSlices"
                   @onchange="OnSliceCountChanged" />
        </div>
        <button class="reset-button" @onclick="ResetPosition">Reset Position</button>
    </div>
</div>
